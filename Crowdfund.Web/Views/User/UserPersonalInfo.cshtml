@model UserProjectsBacked
@{
    ViewData["Title"] = "UserPersonalInfo";
}

<style>
    img {
        width: 80px;
        height: 80px;
    }

    h2 {
        font: Rockwell;
    }

    .personal-myprojects {
        text-align: center;
        font-size: 25px;
        color: darkblue
    }

    .flip-card {
        background-color: transparent;
        width: 70%;
        height: 70%;
        border: 1px solid #f1f1f1;
        perspective: 1000px; /* Remove this if you don't want the 3D effect */
    }

    /* This container is needed to position the front and back side */
    .flip-card-inner {
        position: relative;
        width: auto;
        height: auto;
        text-align: center;
        transition: transform 0.8s;
        transform-style: preserve-3d;
    }

    /* Do an horizontal flip when you move the mouse over the flip box container */
    .flip-card:hover .flip-card-inner {
        transform: rotateY(180deg);
    }

    /* Position the front and back side */
    .flip-card-front, .flip-card-back {
        position: absolute;
        -webkit-backface-visibility: hidden; /* Safari */
        backface-visibility: hidden;
    }

    /* Style the front side (fallback if image is missing) */
    .flip-card-front {
        background-color: #bbb;
        color: black;
    }

    /* Style the back side */
    .flip-card-back {
        background-color: dodgerblue;
        color: white;
        transform: rotateY(180deg);
    }

    .wrapper {
        margin-right: 5px;
    }

    .col-sm-3 {
        margin-bottom: 25px;
    }
</style>
<link rel="stylesheet" type="text/css" href="~/css/mycss.css">
<ul class="nav nav-pills">
    <li class="nav-item">
        <a class="nav-link active" id="profile-tab" data-toggle="tab" href="#profile-tab-area" role="tab" aria-controls="profile-tab-area" aria-selected="false">
            Profile Page
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="myprojects-tab" data-toggle="tab" href="#myprojects-tab-area" role="tab" aria-controls="myprojects-area" aria-selected="false">MyProjects</a>
    </li>

    <li class="nav-item">
        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#fundedprojects-tab-area" role="tab" aria-controls="fundedprojects-area" aria-selected="false">Funded Projects</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#deleteprofile-tab-area" role="tab" aria-controls="deleteprofile-area" aria-selected="false">Update Profile</a>
    </li>
</ul>
<!-- Tab area -->
<div class="tab-content" id="myTabContent"><br />
    <!--Profile Tab Area-->
    <div class="tab-pane fade show active" id="profile-tab-area" role="tabpanel" aria-labelledby="Profile">
        <img src="~/css/content.jpg" alt="Not Found" /><br />
        <form id="profile-form" class="profile page" method="post">
            <div class="form-group">
                <label for="Id">Unique Id</label>
                <input name="Id" placeholder=""
                 class="form-control" readonly value="@Model.User.UserId">
            </div>
            <div class="form-group">
                @*<label for="userName">UserName</label>*@
                <i class="fa fa-user icon" style="color:black"></i>
                <input name="userName" placeholder=""
                       class="form-control" readonly value="@Model.User.UserName">
            </div>

            <div class="form-group">
                @*<label for="email">Email</label>*@
                <i class="fa fa-envelope icon" style="color:black"></i>
                <input name="email" class="form-control" readonly value="@Model.User.Email">
            </div>
            <div class="form-group">
                <label for="projects" style="color:black">Total Projects</label>
                <input name="projects" class="form-control" readonly value="@Model.User.Projects.Count()">
            </div>
            <div class="form-group">
                <label for="fprojects" style="color:black">Total Funded Projects</label>
                <input name="fprojects" class="form-control" readonly value="@Model.ProjectsBacked.Count()">
            </div>
        </form>
    </div>


    <!--My Projects Tab area-->
    <div class="tab-pane fade" id="myprojects-tab-area" role="tabpanel" aria-labelledby="My projects">
        <div class="container-fluid bg-3 text-center">
            <div class="row">
                @foreach (var p in Model.User.Projects)
                {

                    <div class="col-sm-3" style="margin-right:90px">
                        <div class="card border-secondary mb-3" style="width: 18rem;">
                            <img src="~/css/nba.jpg" class="card-img-top" alt="...">
                            <div class="card-body" style="background-color:#bbbbbb">
                                <h5 class="card-title" style="color:brown">@p.Title</h5>
                                <p class="card-text" style="color:#b80d57">@p.Description.</p>
                                <p class="card-text" style="color:#b80d57">@p.Deadline</p>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                                         aria-valuemin="0" aria-valuemax="100" style="width:40%; background-color:forestgreen">
                                        40%(Fund)
                                    </div>
                                </div><br />
                                <a href="@Url.Action("ProjectInfo","Project",new { id = p.ProjectId })" type="button" class="btn btn-primary">See more</a>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <br><br>
        </div>
    </div>

    <!--My Funded Projects-->
    <div class="tab-pane fade" id="fundedprojects-tab-area" role="tabpanel" aria-labelledby="Funded Projects">


        <div class="container-fluid bg-3 text-center">
            <div class="row">
                @foreach (var p in Model.ProjectsBacked)
                {
                    <div class="col-sm-3" style="margin-right:90px">
                        <div class="card" style="width: 18rem;">
                            <img src="~/css/kick2.jpg" class="card-img-top" alt="...">
                            <div class="card-body" style="background-color:#bbbbbb">
                                <h5 class="card-title" style="color:brown">@p.Title</h5>
                                <p class="card-text" style="color:#b80d57">@p.Description.</p>
                                <p class="card-text" style="color:#b80d57">@p.Deadline</p>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                                         aria-valuemin="0" aria-valuemax="100" style="width:40%; background-color:forestgreen">
                                        40%(Fund)
                                    </div>
                                </div><br />
                                <a href="@Url.Action("ProjectInfo","Project",new { id = p.ProjectId })" type="button" class="btn btn-primary">See more</a>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

<!--Update Profile area-->
    <div class="tab-pane fade" id="deleteprofile-tab-area" role="tabpanel" aria-labelledby="Update Profile">
        <form id="profile-form" class="profile page" method="post">
            <br />
            <img src="~/css/content.jpg" alt="Not Found" />
            <div class="form-group">
                <label for="Id">Unique Id</label>
                <input name="Id" placeholder=""
                       class="form-control" readonly value="@Model.User.UserId">
            </div>
            <div class="form-group">
                <label for="userName">UserName</label>
                <input name="userName" placeholder=""
                       class="form-control" value="@Model.User.UserName">
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input name="email" class="form-control js-update-email" value="@Model.User.Email">
            </div>
            <button type="button" class="btn btn-primary js-update-profile-btn">Update Profile</button>

            <div class="alert alert-success js-update-success" style="display:none" role="alert">
                Your Profile is up to date
            </div>

            <div class="alert alert-danger js-update-failed" style="display:none" role="alert">
                Something went wrong please try again
            </div>
        </form>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

@section Scripts {
    <script src="~/js/userPersonalInfo.js" asp-append-version="true"></script>
}


